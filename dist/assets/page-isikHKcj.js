import{r as S,u as b,a as v,b as P,c as C,j as e}from"./index-CQD1z6Fx.js";import{A as L}from"./AuthLogo-Ulkfi78w.js";import{u as E}from"./index.esm-BfKDv2s0.js";import{o as F,c as I,a as m}from"./index.esm-BrXFqGDK.js";import{T as k}from"./TextFormInput-lXv5_g3h.js";import{P as R}from"./PasswordFormInput-DH5xZorJ.js";import{S as T,b as q}from"./authConstant-Cc9JzxD5.js";import{F as A}from"./Form-D_tiZ0-p.js";import{B as $}from"./Button-C4dcH4PN.js";import{a as B}from"./auth-img-Z-U4pW7a.js";import{C as O}from"./Container-DnrcczuC.js";import{R as c,C as r}from"./Row-DR6tWxXV.js";import{C as _}from"./Card--fiRGSee.js";import"./logo-B4Xq2_A3.js";import"./logo-dark-B4Xq2_A3.js";import"./FormContext-jf0KNw1i.js";import"./FormLabel-Dy83DiRD.js";import"./FormControl-B161gUqv.js";import"./IconifyIcon-Tan7SX-s.js";import"./FormCheck-fxkujzDx.js";import"./ElementChildren-CTEE3YrK.js";import"./Button-BXfs0ALN.js";import"./CardHeaderContext-CLFReu40.js";import"./divWithClassName-DI2ioJPZ.js";const z=I({email:m().email("Please enter a valid email").required("Please enter your email"),password:m().required("Please enter your password")}),J=()=>{const[t,i]=S.useState(!1),d=b();v();const{saveSession:u}=P(),{showNotification:a}=C(),{control:n,handleSubmit:p}=E({resolver:F(z),defaultValues:{email:"",password:""}}),g=async f=>{var l;i(!0);try{console.log("Sending login request...");const o=await fetch(`${q}/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),s=await o.json();if(console.log("API Response:",s),o.ok&&(s!=null&&s.success)&&((l=s==null?void 0:s.data)!=null&&l.token)){console.log("Login successful!");const{_id:x,name:h,email:j,role:y,token:w}=s.data;u({_id:x,name:h,email:j,role:y,token:w}),a({message:"Successfully logged in. Redirecting...",variant:"success"});const N="/quotation";setTimeout(()=>d(N),500)}else console.error("Login failed:",s),a({message:s.error||"Invalid email or password",variant:"danger"})}catch(o){console.error("Login error:",o),a({message:"Login failed. Please try again.",variant:"danger"})}finally{i(!1)}};return e.jsxs(A,{onSubmit:p(g),children:[e.jsx(k,{name:"email",control:n,label:"Email",type:"email",placeholder:"Enter your email"}),e.jsx(R,{name:"password",control:n,label:"Password",placeholder:"Enter your password"}),e.jsx($,{type:"submit",disabled:t,className:"w-100 mt-3",children:t?e.jsx(T,{animation:"border",size:"sm"}):"Sign In"})]})},ue=()=>e.jsx("div",{className:"account-pages p-sm-5 position-relative",children:e.jsx(O,{children:e.jsx(c,{className:"justify-content-center",children:e.jsx(r,{xxl:9,lg:11,children:e.jsx(_,{className:"overflow-hidden",children:e.jsxs(c,{className:"g-0",children:[e.jsx(r,{lg:6,children:e.jsxs("div",{className:"d-flex flex-column h-100",children:[e.jsx(L,{}),e.jsxs("div",{className:"p-4 my-auto text-center",children:[e.jsx("h4",{className:"fs-20",children:"Sign In"}),e.jsx("p",{className:"text-muted mb-4",children:"Enter your Email and password to access your account."}),e.jsx(J,{})]})]})}),e.jsx(r,{lg:6,className:"d-none d-lg-block",children:e.jsx("img",{src:B,alt:"image",className:"img-fluid rounded h-100"})})]})})})})})});export{ue as default};
