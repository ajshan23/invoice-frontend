import{u as w,r as p,j as e}from"./index-CQD1z6Fx.js";import{l as D}from"./cropper-CITzz1RM.js";import{I as i}from"./IconifyIcon-Tan7SX-s.js";import{a as F}from"./api-CJpqDj1l.js";import{R as x,C as d}from"./Row-DR6tWxXV.js";import{C as g,a as j}from"./Card--fiRGSee.js";import{F as r}from"./Form-D_tiZ0-p.js";import{B as l}from"./Button-C4dcH4PN.js";import"./index-C88pvD_q.js";import"./CardHeaderContext-CLFReu40.js";import"./divWithClassName-DI2ioJPZ.js";import"./FormCheck-fxkujzDx.js";import"./FormContext-jf0KNw1i.js";import"./ElementChildren-CTEE3YrK.js";import"./FormControl-B161gUqv.js";import"./FormLabel-Dy83DiRD.js";import"./Button-BXfs0ALN.js";const T=()=>{const f=w(),[h,C]=p.useState(null),[n,b]=p.useState({cropX:0,cropY:0,imageWidth:0,imageHeight:0,imageRotate:0,scaleX:0,scaleY:0}),[m,y]=p.useState(null),o=p.useRef(null),u=376/388,R=a=>{const s=a.target.files[0];if(s){const t=new FileReader;t.onload=()=>{C(t.result)},t.readAsDataURL(s)}},v=()=>{var s;const a=(s=o.current)==null?void 0:s.cropper;if(a){const t=a.getData(),c=a.getImageData();b({cropX:Math.ceil(t.x),cropY:Math.ceil(t.y),imageWidth:Math.ceil(c.width),imageHeight:Math.ceil(c.height),imageRotate:Math.ceil(c.rotate),scaleX:Math.ceil(c.scaleX),scaleY:Math.ceil(c.scaleY)}),a.getCroppedCanvas().toBlob(N=>{y(N)})}},I=async()=>{if(!m){alert("Please crop the image first.");return}const a=new File([m],"banner-image.png",{type:"image/png"}),s=new FormData;s.append("image",a);try{const t=await F.post("/admin/upload-banner",s,{headers:{"Content-Type":"multipart/form-data"}});console.log(t),t.status===200?(f("/banner"),console.log("Upload response:",t.data)):(alert("Failed to upload banner."),console.error("Upload failed:",t.data))}catch(t){console.error("Error uploading banner:",t),alert("Failed to upload banner.")}};return e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsx(d,{xs:12,children:e.jsx(g,{children:e.jsx(j,{children:e.jsxs(x,{children:[e.jsxs(d,{lg:9,children:[e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Upload Banner Image (376x388)"}),e.jsx(r.Control,{type:"file",accept:"image/*",onChange:R})]}),h&&e.jsx("div",{className:"img-container",children:e.jsx(D,{src:h,style:{height:400,width:"100%"},initialAspectRatio:u,aspectRatio:u,guides:!1,crop:v,ref:o,rotatable:!0,scalable:!0,zoomable:!0})})]}),e.jsxs(d,{lg:3,children:[e.jsxs("div",{className:"docs-data",children:[e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"X"}),e.jsx(r.Control,{type:"text",value:n.cropX,readOnly:!0})]}),e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Y"}),e.jsx(r.Control,{type:"text",value:n.cropY,readOnly:!0})]}),e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Width"}),e.jsx(r.Control,{type:"text",value:n.imageWidth,readOnly:!0})]}),e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Height"}),e.jsx(r.Control,{type:"text",value:n.imageHeight,readOnly:!0})]}),e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Rotate"}),e.jsx(r.Control,{type:"text",value:n.imageRotate,readOnly:!0})]})]}),e.jsxs(l,{variant:"primary",className:"w-100 mt-3",onClick:I,disabled:!m,children:[e.jsx(i,{icon:"mdi:upload"})," Upload Banner"]})]})]})})})})}),e.jsx(x,{className:"mt-3",children:e.jsx(d,{xs:12,children:e.jsx(g,{children:e.jsx(j,{children:e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsxs(l,{onClick:()=>{var a;return(a=o.current)==null?void 0:a.cropper.zoom(.1)},children:[e.jsx(i,{icon:"mdi:magnify-plus-outline"})," Zoom In"]}),e.jsxs(l,{onClick:()=>{var a;return(a=o.current)==null?void 0:a.cropper.zoom(-.1)},children:[e.jsx(i,{icon:"mdi:magnify-minus-outline"})," Zoom Out"]}),e.jsxs(l,{onClick:()=>{var a;return(a=o.current)==null?void 0:a.cropper.rotate(-45)},children:[e.jsx(i,{icon:"mdi:rotate-left"})," Rotate Left"]}),e.jsxs(l,{onClick:()=>{var a;return(a=o.current)==null?void 0:a.cropper.rotate(45)},children:[e.jsx(i,{icon:"mdi:rotate-right"})," Rotate Right"]}),e.jsxs(l,{onClick:()=>{var a;return(a=o.current)==null?void 0:a.cropper.reset()},children:[e.jsx(i,{icon:"mdi:sync"})," Reset"]}),e.jsxs(l,{onClick:()=>{var a;return(a=o.current)==null?void 0:a.cropper.clear()},children:[e.jsx(i,{icon:"mdi:close"})," Clear"]})]})})})})})]})};export{T as default};
